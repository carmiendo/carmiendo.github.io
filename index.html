<!doctype html>
<html>
  <head>
    <title>Did my pony get wet?</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  </head>

  <body class="bg-cyan-600">
    <div class="flex items-center justify-center min-h-screen">
      <div class="text-center">
        <p id="did-it-rain" class="text-5xl font-bold"></p>
        <p id="how-much" class="text-2xl font-bold mt-2"></p>
      </div>
    </div>

    <script>
      fetch(
        "https://api.open-meteo.com/v1/forecast?latitude=37.477871&longitude=-122.420851&daily=precipitation_sum,precipitation_hours,precipitation_probability_max&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timezone=America%2FLos_Angeles&past_days=1&forecast_days=1",
      )
        .then((response) => response.json())
        .then((data) => {
          // day 0 is the first day
          const precipitation = data.daily.precipitation_sum[0];

          // Check if it rained
          if (precipitation > 0) {
            document.getElementById("did-it-rain").innerText = `Yes!`;
            document.getElementById("did-it-rain").innerText =
              `${precipitation} inches of rain!`;
          } else {
            document.getElementById("did-it-rain").innerText = `Nope!`;
            document.getElementById("did-it-rain").innerText = ``;
          }
        })
        .catch((error) => console.error("Error fetching data:", error));
    </script>
  </body>
</html>
